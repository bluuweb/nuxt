<!DOCTYPE html>
<html lang="es-ES">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vuex en Nuxt.js | Nuxt</title>
    <meta name="description" content="Aprende a utilizar Nuxt en tus proyectos web">
    
    
    <link rel="preload" href="/nuxt/assets/css/0.styles.93e9526e.css" as="style"><link rel="preload" href="/nuxt/assets/js/app.f14dd277.js" as="script"><link rel="preload" href="/nuxt/assets/js/5.d860079f.js" as="script"><link rel="prefetch" href="/nuxt/assets/js/2.aef8012b.js"><link rel="prefetch" href="/nuxt/assets/js/3.c4b1fd69.js"><link rel="prefetch" href="/nuxt/assets/js/4.88f76a0b.js"><link rel="prefetch" href="/nuxt/assets/js/6.c6708033.js">
    <link rel="stylesheet" href="/nuxt/assets/css/0.styles.93e9526e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/nuxt/" class="home-link router-link-active"><!----> <span class="site-name">Nuxt</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/nuxt/" class="nav-link">Guía</a></div><div class="nav-item"><a href="https://youtube.com/bluuweb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Youtube
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/nuxt/" class="nav-link">Guía</a></div><div class="nav-item"><a href="https://youtube.com/bluuweb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Youtube
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/nuxt/" class="sidebar-link">Introducción a Nuxt</a></li><li><a href="/nuxt/vuex/" class="active sidebar-link">Vuex en Nuxt.js</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nuxt/vuex/#primeros-pasos" class="sidebar-link">Primeros pasos</a></li><li class="sidebar-sub-header"><a href="/nuxt/vuex/#fetch" class="sidebar-link">fetch</a></li><li class="sidebar-sub-header"><a href="/nuxt/vuex/#accion-nuxtserverinit" class="sidebar-link">Acción nuxtServerInit</a></li></ul></li><li><a href="/nuxt/practica-1/" class="sidebar-link">Práctica Tareas Firestore</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="vuex-en-nuxt-js"><a href="#vuex-en-nuxt-js" aria-hidden="true" class="header-anchor">#</a> Vuex en Nuxt.js</h1> <p>Para utilizar vuex en Nuxt existen algunas diferencias con las aplicaciones de Vue.js, aquí explicaremos paso a paso como podrías utilizar la tienda en Nuxt.js</p> <h2 id="primeros-pasos"><a href="#primeros-pasos" aria-hidden="true" class="header-anchor">#</a> Primeros pasos</h2> <p>Comenzamos creando el archivo <code>index.js</code> dentro de la carpeta store <code>(store/index.js)</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">state</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  counter<span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>counter<span class="token operator">++</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">acciones</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>commit<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// Acciónes en vuex</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>La diferencia con Vue.js es que exportamos todas las constantes y state es igual a una función de flecha sin parámetros.</p> <h2 id="fetch"><a href="#fetch" aria-hidden="true" class="header-anchor">#</a> fetch</h2> <p>Para poder llenar la tienda se utiliza generalmente el método <code>fetch</code>, este es similar a asyncData exepto que no establece datos al componente, veremos un ejemplo en la práctica con firebase.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">fetch</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> store<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://my-api/stars'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setStars'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="accion-nuxtserverinit"><a href="#accion-nuxtserverinit" aria-hidden="true" class="header-anchor">#</a> Acción nuxtServerInit</h2> <p>Si la acción <code>nuxtServerInit</code> está definida en la tienda, Nuxt.js lo llamará con el contexto (solo desde el lado del servidor). Es útil cuando tenemos algunos datos en el servidor que queremos proporcionar directamente al lado del cliente. También veremos un ejemplo en la siguiente sección con firebase.</p> <div class="language-js extra-class"><pre class="language-js"><code>actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function">nuxtServerInit</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> req <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/nuxt/" class="prev router-link-active">
          Introducción a Nuxt
        </a></span> <span class="next"><a href="/nuxt/practica-1/">
          Práctica Tareas Firestore
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/nuxt/assets/js/app.f14dd277.js" defer></script><script src="/nuxt/assets/js/5.d860079f.js" defer></script>
  </body>
</html>
